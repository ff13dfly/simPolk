<div class="row">
    <div class="col-lg-12">
        <label for="from_account">Transfer from</label>
        <input type="text" class="form-control" name="from_account" id="from_account" value="" />
    </div>
    <div class="col-lg-12">
        <label for="to_account">Transfer to</label>
        <input type="text" class="form-control" name="to_account" id="to_account" value="" />
    </div>
    <div class="col-lg-12">
        <label for="trans_amount">Amount</label>
        <input type="text" class="form-control" name="trans_amount" id="trans_amount" value="" />
    </div>
    <div class="col-lg-12">
        <button class="btn btn-lg btn-primary" id="transfer_submit">Sent</button>
    </div>
</div>

<script type="text/javascript">
    var self = {
        cacheInput: function() {
            var data = {
                from: $('#from_account').val(),
                to: $('#to_account').val(),
                amount: $('#trans_amount').val(),
                stamp: new Date().getTime(),
            }
            localStorage.setItem('transfer_cache', JSON.stringify(data));
        },
        setCache: function(dt) {
            $('#from_account').val(dt.from);
            $('#to_account').val(dt.to);
            $('#trans_amount').val(dt.amount);
            return true;
        },
    }

    $(function() {
        if (!localStorage.getItem('transfer_cache')) return false;
        var dt = JSON.parse(localStorage.getItem('transfer_cache'));
        var dif = new Date().getTime() - dt.stamp;
        if (dif > 600000) return false;
        self.setCache(dt);
    });

    $('.form-control').off('blur').on('blur', self.cacheInput);

    $('#transfer_submit').on('click', function() {
        var a_from = $('#from_account').val();
        var a_to = $('#to_account').val();
        var val = $('#trans_amount').val();

        simPolk.request('chain', 'transfer', {
            from: a_from,
            to: a_to,
            value: val
        }, function(res) {
            console.log(res)
        });
    });
</script>