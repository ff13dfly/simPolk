<div class="row">
    <div class="col-lg-7">
        <div class="row">
            <div class="col-lg-12  gy-4">
                <label for="mining_prefix">Prefix string (simlate this as the pre block hash)</label>
                <input type="text" class="form-control" name="mining_prefix" id="mining_prefix" value="" placeholder="Pre block hash" />
            </div>

            <div class="col-lg-12  gy-4">
                <label for="mining_words">Your words</label>
                <input type="text" class="form-control" name="mining_words" id="mining_words" value="" placeholder="Your words" />
            </div>

            <div class="col-lg-12  gy-4">
                <label for="mining_words">Difficult (simlutor use sha256 to calc the hash)</label>
                <input type="text" class="form-control" name="mining_words" id="mining_words" value="0x0000" placeholder="Calc difficulty" />
            </div>
            <div class="col-lg-8 text-start gy-4" id="info_con">

            </div>
            <div class="col-lg-4 text-end gy-4">
                <button class="btn btn-lg btn-primary" id="storage_set">Mining</button>
            </div>
        </div>
    </div>
    <div class="col-lg-1"></div>
    <div class="col-lg-4">
        <div class="row" id="node_list">

        </div>
    </div>
</div>
<script type="text/javascript">
    var self = {
        nodeList: function() {
            var con = '#node_list';
            simPolk.request('node', 'list', {
                p: 1
            }, function(res) {
                //console.log(res)
                //ck && ck(res.node);

                var dom = '';
                for (var k in res.node) {
                    var row = res.node[k];
                    dom += `<div class="col-lg-12 gy-2">
                            <div class="row list-group-item">
                                <div class="col-lg-10"><small>${self.shorten(row.account,16)}</small></div>
                                <div class="col-lg-10"><p>${row.url}<p></div>
                            </div>
                        </div>`;
                }
                $(con).html(dom);
            });
        },
        shorten: function(str, n) {
            return str.substr(0, n) + '......' + str.substr(str.length - n, n);
        },
        transformTime(timestamp) {
            var addZero = self.addZero;
            if (timestamp) {
                var time = new Date(timestamp * 1000);
                var y = time.getFullYear();
                var M = time.getMonth() + 1;
                var d = time.getDate();
                var h = time.getHours();
                var m = time.getMinutes();
                var s = time.getSeconds();
                return y + '-' + addZero(M) + '-' + addZero(d) + ' ' + addZero(h) + ':' + addZero(m) + ':' + addZero(s);
            } else {
                return '';
            }
        },
        addZero: function(m) {
            return m < 10 ? '0' + m : m;
        },
    }

    $(function() {
        self.nodeList();
    });
</script>