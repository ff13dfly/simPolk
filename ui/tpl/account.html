<div class="row">
    <div class="col-lg-8">
        <div class="row">
            <div class="col-lg-8  gy-4">
                <label for="account_hash">Account Hash <span class="text-danger" id="info_view"></span></label>
                <textarea class="form-control" name="account_hash" id="account_hash" cols="30" rows="2"></textarea>
            </div>
            <div class="col-lg-3 text-end gy-4">
                <button class="btn btn-lg btn-primary" id="account_view" style="margin-top: 1.5em;">Details</button>
            </div>
            <div class="col-lg-12 gy-4" id="account_con"></div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="row">
            <div class="col-lg-12  gy-4">
                <label for="uxto_hash">UXTO hash</label>
                <input type="text" class="form-control" name="uxto_hash" id="uxto_hash" value="">
            </div>
            <div class="col-lg-12 text-end gy-4">
                <button class="btn btn-lg btn-primary" id="uxto_search">Search UXTO</button>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6  gy-4">
                <p>Create a simulate account.</p>
            </div>
            <div class="col-lg-6 text-end gy-4">
                <button class="btn btn-lg btn-primary" id="new_account">New Account</button>
            </div>
            <div class="col-lg-12">
                <hr>
            </div>
        </div>

        <div class="row" id="account_list"></div>
    </div>

</div>

<script type="text/javascript" charset="utf-8" src="lib/pager.js"></script>
<script type="text/javascript">
    var self = {
        info: function(txt, con) {
            console.log(txt);
            $(con).html(txt);
        },
        jsonBlock: function(js, con) {
            Jeditor.init(js, {
                "container": con,
                "name": "Account struct",
                "setting": {
                    "headerShow": false,
                    "row": {
                        "left": 4,
                        "right": 7,
                        "note": 1
                    },
                    "mode": "edit",
                },
            })
        },
    };

    $(function() {
        var dt = '<div class="col-lg-12">{type} : {account}</div>';
        var translate = function() {

        };
        var con = '#account_list';
        var ajaxFun = function(page, ck) {
            simPolk.request('account', 'list', {
                p: page
            }, function(res) {
                ck && ck(res.data);
            });
        }
        var auto = [];
        var setting = {};
        var events = {}
        pager.show(dt, translate, con, ajaxFun, auto, setting, events);
    });
    $('#uxto_search').off('click').on('click', function() {
        var hash = $('#uxto_hash').val();
        //if (!hash || hash.length != 64) return self.info('Error hash', '#info_view');

        simPolk.request('account', 'uxto', {
            'hash': hash,
        }, function(res) {
            console.log(res);
            //self.jsonBlock(res.data, '#account_con');
        });
    });

    $('#account_view').off('click').on('click', function() {
        var hash = $('#account_hash').val();
        if (!hash || hash.length != 64) return self.info('Error hash', '#info_view');

        simPolk.request('account', 'view', {
            'u': hash,
        }, function(res) {
            //console.log(res)
            //$('#account_con').html(JSON.stringify(res.data));
            self.jsonBlock(res.data, '#account_con');
        });
    });

    $('#new_account').off('click').on('click', function() {
        simPolk.request('account', 'new', {}, function(res) {
            console.log(res)
            if (res.success) return location.reload();
        });

    });
</script>